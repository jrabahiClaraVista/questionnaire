{% extends "AppBundle::layout.html.twig" %}

{% block content %}
	<hr>
	<h1 class="text-center">Questionnaire de satisfaction</h1>	

	<div id="form_body">
		{{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}
			{{ form_errors(form) }}
		<div class="form_error"></div>

		<div id="step1" class="col-md-8 col-md-offset-2 col-xs-12 home-block">
			<div>
				<div class="col-xs-12 text-center">
					<div class="header-form">
						<h2>Question 1/5</h2>
					</div>
					<p>
						Quelle note donneriez-vous à<br />
						<strong>VOTRE ACCUEIL EN BOUTIQUE</strong> ?
					</p>

					<div class="etoiles_block">
						<span id="question1_1" class="etoile etoile1" number="1" value="1"></span>
						<span id="question1_2" class="etoile etoile2" number="1" value="2"></span>
						<span id="question1_3" class="etoile etoile3" number="1" value="3"></span>
						<span id="question1_4" class="etoile etoile4" number="1" value="4"></span>
						<span id="question1_5" class="etoile etoile5" number="1" value="5"></span>
					</div>
					<div class="col-xs-12 text-left commentaire">
						<label for="appbundle_client[commentaire3]">
							Commentaire :
						</label>
						<div>
							{{ form_widget(form.commentaire1) }}
						</div>
					</div>
					<div>
						<button id="next1" type="button" class="btn btn-lp">suivant</button>
					</div>
				</div>
			</div>
		</div>
		<div id="step2" class="col-md-8 col-md-offset-2 col-xs-12 home-block">
			<div>
				<div class="col-xs-12 text-center">
					<div class="header-form">
						<h2>Question 2/5</h2>
					</div>
					<p>
						Quelle note donneriez-vous au<br />
						choix de <strong>PRODUITS PROPOSÉS</strong><br />
						(marques, styles, ...) ?
					</p>

					<div class="etoiles_block">
						<span id="question2_1" class="etoile etoile1" number="2" value="1"></span>
						<span id="question2_2" class="etoile etoile2" number="2" value="2"></span>
						<span id="question2_3" class="etoile etoile3" number="2" value="3"></span>
						<span id="question2_4" class="etoile etoile4" number="2" value="4"></span>
						<span id="question2_5" class="etoile etoile5" number="2" value="5"></span>
					</div>
					
					<div class="col-xs-12 text-left commentaire">
						<label for="appbundle_client[commentaire3]">
							Commentaire :
						</label>
						<div>
							{{ form_widget(form.commentaire2) }}
						</div>
					</div>
					<div>
						<button id="prev2" type="button" class="btn btn-lp">précedent</button>
						<button id="next2" type="button" class="btn btn-lp">suivant</button>
					</div>
				</div>
			</div>
		</div>
		<div id="step3" class="col-md-8 col-md-offset-2 col-xs-12 home-block">
			<div>
				<div class="col-xs-12 text-center">
					<div class="header-form">
						<h2>Question 3/5</h2>
					</div>
					<p>
						Quelle note donneriez-vous à<br />
						<strong>LA PRÉSENTATION DES PRODUITS<br />
						en boutique</strong> (vitrine, mise en avant,<br />
						merchandising, ...) ?
					</p>

					<div class="etoiles_block">
						<span id="question3_1" class="etoile etoile1" number="3" value="1"></span>
						<span id="question3_2" class="etoile etoile2" number="3" value="2"></span>
						<span id="question3_3" class="etoile etoile3" number="3" value="3"></span>
						<span id="question3_4" class="etoile etoile4" number="3" value="4"></span>
						<span id="question3_5" class="etoile etoile5" number="3" value="5"></span>
					</div>
					
					<div class="col-xs-12 text-left commentaire">
						<label for="appbundle_client[commentaire3]">
							Commentaire :
						</label>
						<div>
							{{ form_widget(form.commentaire3) }}
						</div>
					</div>
					<div>
						<button id="prev3" type="button" class="btn btn-lp">précedent</button>
						<button id="next3" type="button" class="btn btn-lp">suivant</button>
					</div>			
				</div>
			</div>
		</div>
		<div id="step4" class="col-md-8 col-md-offset-2 col-xs-12 home-block">
			<div>
				<div class="col-xs-12 text-center">
					<div class="header-form">
						<h2>Question 4/5</h2>
					</div>
					<p>
						Quelle note donneriez-vous à<br />
						<strong>VOTRE EXPERIENCE D’ACHAT</strong><br />
						(conseil, temps d’attente, service<br />
						proposé,...) ?
					</p>

					<div class="etoiles_block">
						<span id="question4_1" class="etoile etoile1" number="4" value="1"></span>
						<span id="question4_2" class="etoile etoile2" number="4" value="2"></span>
						<span id="question4_3" class="etoile etoile3" number="4" value="3"></span>
						<span id="question4_4" class="etoile etoile4" number="4" value="4"></span>
						<span id="question4_5" class="etoile etoile5" number="4" value="5"></span>
					</div>
					
					<div class="col-xs-12 text-left commentaire">
						<label for="appbundle_client[commentaire3]">
							Commentaire :
						</label>
						<div>
							{{ form_widget(form.commentaire4) }}
						</div>
					</div>
					<div>
						<button id="prev4" type="button" class="btn btn-lp">précedent</button>
						<button id="next4" type="button" class="btn btn-lp">suivant</button>
					</div>
				</div>
			</div>
		</div>
		<div id="step5" class="col-md-8 col-md-offset-2 col-xs-12 home-block">
			<div>
				<div class="col-xs-12 text-center">
					<div class="header-form">
						<h2>Question 5/5</h2>
					</div>
					<p>
						Recommanderiez-vous cette boutique<br />
						<strong>À VOTRE ENTOURAGE</strong> ?
					</p>

					<div class="etoiles_block">
						<span id="question5_1" class="etoile etoile1" number="5" value="1"></span>
						<span id="question5_2" class="etoile etoile2" number="5" value="2"></span>
						<span id="question5_3" class="etoile etoile3" number="5" value="3"></span>
						<span id="question5_4" class="etoile etoile4" number="5" value="4"></span>
						<span id="question5_5" class="etoile etoile5" number="5" value="5"></span>
					</div>
					
					<div class="col-xs-12 text-left commentaire">
						<label for="appbundle_client[commentaire3]">
							Commentaire :
						</label>
						<div>
							{{ form_widget(form.commentaire5) }}
						</div>
					</div>
					<div>
						<button id="prev5" type="button" class="btn btn-lp">précedent</button>
						{{ form_widget(form.Envoyer, {'attr': {'class': 'btn btn-lp'} }) }}
					</div>
				</div>
			</div>
		</div>
		<div id="step6" class="col-md-8 col-md-offset-2 col-xs-12 home-block">
			<div>
				<div class="col-xs-12 text-center">
					<h1 style="font-weight:bold;">MERCI !</h1>
					<h2>A très vite en boutique ou<br />
						sur <a href="https://www.louispion.fr">LouisPion.fr</a> !</h2>
				</div>
			</div>
		</div>

			{{ form_rest(form) }}
		{{ form_end(form) }}
	</div>

	<div  id="legend" class=" col-md-8 col-md-offset-2 col-xs-12">
		<div class="col-xs-12 text-center"><br />
			<p>
				1 étoile = vous n’êtes pas du tout satisfait<br />
				5 étoiles = vous etes très satisfait
			</p>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
	{{ parent() }}

	<script type="text/javascript">
		$(function() {

			$('form').on('submit', function (e) {
		        e.preventDefault();
		 
		        $.ajax({
		            type: $(this).attr('method'),
		            url: $(this).attr('action'),
		            data: $(this).serialize()
		        })
		        .done(function (data) {
		            if (typeof data.message !== 'undefined') {
		                alert(data.message);
		            }
		        })
		        .fail(function (jqXHR, textStatus, errorThrown) {
		            if (typeof jqXHR.responseJSON !== 'undefined') {
		                if (jqXHR.responseJSON.hasOwnProperty('form')) {
		                    $('#form_body').html(jqXHR.responseJSON.form);
		                }
		 
		                $('.form_error').html(jqXHR.responseJSON.message);
		 
		            } else {
		                alert(errorThrown);
		            }
		 
		        });
		    });
			/*
				Init
			*/
			var q1 = $("#appbundle_client_question1");
			var q2 = $("#appbundle_client_question2");
			var q3 = $("#appbundle_client_question3");
			var q4 = $("#appbundle_client_question4");
			var q5 = $("#appbundle_client_question5");

			switch(q1.val())
		 	{
		 		case "1":
	 				etoile1(1);
	 			break;
	 			case "2":
	 				etoile2(1);
	 			break;
	 			case "3":
	 				etoile3(1);
	 			break;
	 			case "4":
	 				etoile4(1);
	 			break;
	 			case "5":
	 				etoile5(1);
	 			break;
		 	}
		 	
		 	switch(q2.val())
		 	{
		 		case "1":
	 				etoile1(2);
	 			break;
	 			case "2":
	 				etoile2(2);
	 			break;
	 			case "3":
	 				etoile3(2);
	 			break;
	 			case "4":
	 				etoile4(2);
	 			break;
	 			case "5":
	 				etoile5(2);
	 			break;
		 	}
		 	
		 	switch(q3.val())
		 	{
		 		case "1":
	 				etoile1(3);
	 			break;
	 			case "2":
	 				etoile2(3);
	 			break;
	 			case "3":
	 				etoile3(3);
	 			break;
	 			case "4":
	 				etoile4(3);
	 			break;
	 			case "5":
	 				etoile5(3);
	 			break;
		 	}
		 	
		 	switch(q4.val())
		 	{
		 		case "1":
	 				etoile1(4);
	 			break;
	 			case "2":
	 				etoile2(4);
	 			break;
	 			case "3":
	 				etoile3(4);
	 			break;
	 			case "4":
	 				etoile4(4);
	 			break;
	 			case "5":
	 				etoile5(4);
	 			break;
		 	}
		 	
		 	switch(q5.val())
		 	{
		 		case "1":
	 				etoile1(5);
	 			break;
	 			case "2":
	 				etoile2(5);
	 			break;
	 			case "3":
	 				etoile3(5);
	 			break;
	 			case "4":
	 				etoile4(5);
	 			break;
	 			case "5":
	 				etoile5(5);
	 			break;
		 	}

		 	/*
		 		Over
		 	*/
		 	$(".etoile1").on('mouseover', function(){
		 		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				etoile1(1);
		 			break;
		 			case "2":
		 				etoile1(2);
		 			break;
		 			case "3":
		 				etoile1(3);
		 			break;
		 			case "4":
		 				etoile1(4);
		 			break;
		 			case "5":
		 				etoile1(5);
		 			break;
		 		}
		  	});
		  	$(".etoile2").on('mouseover', function(){
		  		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				etoile2(1);
		 			break;
		 			case "2":
		 				etoile2(2);
		 			break;
		 			case "3":
		 				etoile2(3);
		 			break;
		 			case "4":
		 				etoile2(4);
		 			break;
		 			case "5":
		 				etoile2(5);
		 			break;
		 		}
		  	});
		  	$(".etoile3").on('mouseover', function(){
		  		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				etoile3(1);
		 			break;
		 			case "2":
		 				etoile3(2);
		 			break;
		 			case "3":
		 				etoile3(3);
		 			break;
		 			case "4":
		 				etoile3(4);
		 			break;
		 			case "5":
		 				etoile3(5);
		 			break;
		 		}
		  	});
		  	$(".etoile4").on('mouseover', function(){
		  		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				etoile4(1);
		 			break;
		 			case "2":
		 				etoile4(2);
		 			break;
		 			case "3":
		 				etoile4(3);
		 			break;
		 			case "4":
		 				etoile4(4);
		 			break;
		 			case "5":
		 				etoile4(5);
		 			break;
		 		}
		  	});
		  	$(".etoile5").on('mouseover', function(){
		  		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				etoile5(1);
		 			break;
		 			case "2":
		 				etoile5(2);
		 			break;
		 			case "3":
		 				etoile5(3);
		 			break;
		 			case "4":
		 				etoile5(4);
		 			break;
		 			case "5":
		 				etoile5(5);
		 			break;
		 		}
		  	});

		  	/**** OUT ****/

		  	$(".etoile").on('mouseleave', function(){
		 		switch(q1.val())
			 	{
			 		case "1":
		 				etoile1(1);
		 			break;
		 			case "2":
		 				etoile2(1);
		 			break;
		 			case "3":
		 				etoile3(1);
		 			break;
		 			case "4":
		 				etoile4(1);
		 			break;
		 			case "5":
		 				etoile5(1);
		 			break;
		 			default:
		 				etoile0(1);
		 			break;
			 	}
		  	});
		  	$(".etoile").on('mouseleave', function(){
		  		switch(q2.val())
			 	{
			 		case "1":
		 				etoile1(2);
		 			break;
		 			case "2":
		 				etoile2(2);
		 			break;
		 			case "3":
		 				etoile3(2);
		 			break;
		 			case "4":
		 				etoile4(2);
		 			break;
		 			case "5":
		 				etoile5(2);
		 			break;
		 			default:
		 				etoile0(2);
		 			break;
			 	}
		  	});
		  	$(".etoile").on('mouseleave', function(){
		  		switch(q3.val())
			 	{
			 		case "1":
		 				etoile1(3);
		 			break;
		 			case "2":
		 				etoile2(3);
		 			break;
		 			case "3":
		 				etoile3(3);
		 			break;
		 			case "4":
		 				etoile4(3);
		 			break;
		 			case "5":
		 				etoile5(3);
		 			break;
		 			default:
		 				etoile0(3);
		 			break;
			 	}
		  	});
		  	$(".etoile").on('mouseleave', function(){
		  		switch(q4.val())
			 	{
			 		case "1":
		 				etoile1(4);
		 			break;
		 			case "2":
		 				etoile2(4);
		 			break;
		 			case "3":
		 				etoile3(4);
		 			break;
		 			case "4":
		 				etoile4(4);
		 			break;
		 			case "5":
		 				etoile5(4);
		 			break;
		 			default:
		 				etoile0(4);
		 			break;
			 	}
		  	});
		  	$(".etoile").on('mouseleave', function(){
		  		switch(q5.val())
			 	{
			 		case "1":
		 				etoile1(5);
		 			break;
		 			case "2":
		 				etoile2(5);
		 			break;
		 			case "3":
		 				etoile3(5);
		 			break;
		 			case "4":
		 				etoile4(5);
		 			break;
		 			case "5":
		 				etoile5(5);
		 			break;
		 			default:
		 				etoile0(5);
		 			break;
			 	}
		  	});

		  	/*
				Click
		  	*/
		  	$(".etoile1").on('click', function(){
		  		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				$("#appbundle_client_question1").val(1);
		 				etoile1(1);
		 			break;
		 			case "2":
		 				$("#appbundle_client_question2").val(1);
		 				etoile1(2);
		 			break;
		 			case "3":
		 				$("#appbundle_client_question3").val(1);
		 				etoile1(3);
		 			break;
		 			case "4":
		 				$("#appbundle_client_question4").val(1);
		 				etoile1(4);
		 			break;
		 			case "5":
		 				$("#appbundle_client_question5").val(1);
		 				etoile1(5);
		 			break;
		 		}
		 	});
		  	$(".etoile2").on('click', function(){
		  		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				$("#appbundle_client_question1").val(2);
		 				etoile2(1);
		 			break;
		 			case "2":
		 				$("#appbundle_client_question2").val(2);
		 				etoile2(2);
		 			break;
		 			case "3":
		 				$("#appbundle_client_question3").val(2);
		 				etoile2(3);
		 			break;
		 			case "4":
		 				$("#appbundle_client_question4").val(2);
		 				etoile2(4);
		 			break;
		 			case "5":
		 				$("#appbundle_client_question5").val(2);
		 				etoile2(5);
		 			break;
		 		}
		 	});
		  	$(".etoile3").on('click', function(){
		  		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				$("#appbundle_client_question1").val(3);
		 				etoile3(1);
		 			break;
		 			case "2":
		 				$("#appbundle_client_question2").val(3);
		 				etoile3(2);
		 			break;
		 			case "3":
		 				$("#appbundle_client_question3").val(3);
		 				etoile3(3);
		 			break;
		 			case "4":
		 				$("#appbundle_client_question4").val(3);
		 				etoile3(4);
		 			break;
		 			case "5":
		 				$("#appbundle_client_question5").val(3);
		 				etoile3(5);
		 			break;
		 		}
		 	});
		  	$(".etoile4").on('click', function(){
		  		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				$("#appbundle_client_question1").val(4);
		 				etoile4(1);
		 			break;
		 			case "2":
		 				$("#appbundle_client_question2").val(4);
		 				etoile4(2);
		 			break;
		 			case "3":
		 				$("#appbundle_client_question3").val(4);
		 				etoile4(3);
		 			break;
		 			case "4":
		 				$("#appbundle_client_question4").val(4);
		 				etoile4(4);
		 			break;
		 			case "5":
		 				$("#appbundle_client_question5").val(4);
		 				etoile4(5);
		 			break;
		 		}
		 	});
		  	$(".etoile5").on('click', function(){
		  		switch($(this).attr('number'))
		 		{
		 			case "1":
		 				$("#appbundle_client_question1").val(5);
		 				etoile5(1);
		 			break;
		 			case "2":
		 				$("#appbundle_client_question2").val(5);
		 				etoile5(2);
		 			break;
		 			case "3":
		 				$("#appbundle_client_question3").val(5);
		 				etoile5(3);
		 			break;
		 			case "4":
		 				$("#appbundle_client_question4").val(5);
		 				etoile5(4);
		 			break;
		 			case "5":
		 				$("#appbundle_client_question5").val(5);
		 				etoile5(5);
		 			break;
		 		}
		 	});


		  	/*
		  		Fonctions
		  	*/

		  	function etoile0(number)
		  	{
		  		var e1 = "#question"+number+"_1";
		  		var e2 = "#question"+number+"_2";
		  		var e3 = "#question"+number+"_3";
		  		var e4 = "#question"+number+"_4";
		  		var e5 = "#question"+number+"_5";
		  		
		  		$(e1).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e2).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e3).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e4).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e5).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  	}
		  	function etoile1(number)
		  	{
		  		var e1 = "#question"+number+"_1";
		  		var e2 = "#question"+number+"_2";
		  		var e3 = "#question"+number+"_3";
		  		var e4 = "#question"+number+"_4";
		  		var e5 = "#question"+number+"_5";
		  		
		  		$(e1).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e2).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e3).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e4).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e5).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  	}
		  	function etoile2(number)
		  	{
		  		var e1 = "#question"+number+"_1";
		  		var e2 = "#question"+number+"_2";
		  		var e3 = "#question"+number+"_3";
		  		var e4 = "#question"+number+"_4";
		  		var e5 = "#question"+number+"_5";

		  		$(e1).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e2).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e3).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e4).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e5).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  	}
		  	function etoile3(number)
		  	{
		  		var e1 = "#question"+number+"_1";
		  		var e2 = "#question"+number+"_2";
		  		var e3 = "#question"+number+"_3";
		  		var e4 = "#question"+number+"_4";
		  		var e5 = "#question"+number+"_5";

		  		$(e1).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e2).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e3).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e4).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  		$(e5).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  	}
		  	function etoile4(number)
		  	{
		  		var e1 = "#question"+number+"_1";
		  		var e2 = "#question"+number+"_2";
		  		var e3 = "#question"+number+"_3";
		  		var e4 = "#question"+number+"_4";
		  		var e5 = "#question"+number+"_5";

		  		$(e1).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e2).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e3).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e4).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e5).css('background-image', 'url(/web/images/etoile-grey.svg)');
		  	}
		  	function etoile5(number)
		  	{
		  		var e1 = "#question"+number+"_1";
		  		var e2 = "#question"+number+"_2";
		  		var e3 = "#question"+number+"_3";
		  		var e4 = "#question"+number+"_4";
		  		var e5 = "#question"+number+"_5";

		  		$(e1).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e2).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e3).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e4).css('background-image', 'url(/web/images/etoile.svg)');
		  		$(e5).css('background-image', 'url(/web/images/etoile.svg)');
		  	}

		  	/*
				Gestion affichage des blocs
		  	*/

		  	$("#next1").on('click', function(){
		  		$("#step1").hide();
		  		$("#step2").show();
		  	});
		  	$("#next2").on('click', function(){
		  		$("#step2").hide();
		  		$("#step3").show();
		  	});
		  	$("#next3").on('click', function(){
		  		$("#step3").hide();
		  		$("#step4").show();
		  	});
		  	$("#next4").on('click', function(){
		  		$("#step4").hide();
		  		$("#step5").show();
		  	});
		  	$("#appbundle_client_Envoyer").on('click', function(){
		  		$("#step5").hide();
		  		$("#legend").hide();
		  		$("#step6").show();
		  	});
		  	$("#prev2").on('click', function(){
		  		$("#step2").hide();
		  		$("#step1").show();
		  	});		  	
		  	$("#prev3").on('click', function(){
		  		$("#step3").hide();
		  		$("#step2").show();
		  	});
		  	$("#prev4").on('click', function(){
		  		$("#step4").hide();
		  		$("#step3").show();
		  	});
		  	$("#prev5").on('click', function(){
		  		$("#step5").hide();
		  		$("#step4").show();
		  	});		  	

		});
	</script>
{% endblock %}